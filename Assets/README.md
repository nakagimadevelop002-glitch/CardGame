# ResearchTCG - リサーチ用ミニマルTCG

研究用に開発された、マナ管理と属性相性が重要なシンプルなトレーディングカードゲームです。

---

## 🎮 ゲームルール

### 基本ルール
- **プレイヤー vs AI** の1対1対戦
- 各プレイヤーはランダムな**20枚デッキ**を持つ
- **初期手札5枚**からスタート
- 初期マナは**0**（マナ管理が重要！）
- 手札が尽きたらゲーム終了

### ターンの流れ

各ターンは**3つのフェーズ**で構成されます：

#### 1️⃣ マナ獲得フェーズ（手札2枚以上の場合）
手札から**1枚選んで捨て札**にすることで、そのカードの**攻撃力分のマナ**を獲得
- 強いカードを捨てる = 大量マナ獲得
- 弱いカードを捨てる = 少量マナ獲得
- **戦略性**: 今ターンで使いたいカードと、将来のために残すカードを見極める

#### 2️⃣ カード選択フェーズ
以下の**3つのマナアクション**から1つ選択（マナ2以上の場合）：

**🔥 ブースト（マナ消費）**
- マナを消費して、次に出すカードの攻撃力を上昇
- ATK+1: マナ2消費
- ATK+2: マナ4消費
- ATK+3: マナ6消費

**🔄 マリガン（マナ3消費）**
- 手札を1枚ランダムに捨てて、デッキから1枚ドロー
- 不要なカードを入れ替えられる

**⏭️ スキップ**
- マナアクションを使わずにカード選択へ

その後、手札から**1枚選んでプレイ**（コスト分のマナを消費）

#### 3️⃣ バトルフェーズ
- **攻撃力が高い方が勝利**し、1ポイント獲得
- **攻撃力が同じ** → 属性相性で判定
- 両者2枚ドローして次のターンへ

---

## ⚔️ 属性相性システム

5つの属性が存在し、完全バランス型の相性システム：

| 属性 | 強い相手 | 弱い相手 |
|------|----------|----------|
| 🔥 **Fire（火）** | Nature, Air | Water, Earth |
| 💧 **Water（水）** | Fire, Earth | Nature, Air |
| 🌿 **Nature（自然）** | Water, Earth | Fire, Air |
| 🪨 **Earth（土）** | Fire, Air | Water, Nature |
| 💨 **Air（風）** | Water, Nature | Fire, Earth |

### 相性の考え方
- 🔥 Fire: 自然を燃やし、風に煽られる / 水と土に消される
- 💧 Water: 火を消し、土を侵食 / 自然に吸収され、風に蒸発
- 🌿 Nature: 水を吸収し、土を砕く / 火に燃え、風に枯れる
- 🪨 Earth: 火を抑え、風を遮る / 水に侵食され、自然に砕かれる
- 💨 Air: 水を蒸発させ、自然を枯らす / 火に煽られ、土に遮られる

---

## 🎯 操作方法

### マウス操作のみ
- **カードをクリック**: カードを選択（捨て札/プレイ）
- **ボタンをクリック**: マナアクション選択、再戦など
- **カードにホバー**: カードが1.1倍に拡大（見やすく）

---

## ⚠️ 重要な戦略ポイント

### 💰 マナ管理
- **初期マナは0** → 最初のターンでマナを獲得する必要がある
- コストが払えないと**不戦敗**（相手に1ポイント＋手札1枚ペナルティ）
- マナは**ターンを跨いで持ち越し可能**
- 計画的なマナ管理が勝利の鍵

### 🃏 カードコスト
- カードには**コスト**が設定されている（JSON参照）
- 強力なカードほど高コスト
- 手札とマナのバランスを考えて行動する

### 🎲 ブーストとマリガン
- **ブーストは1ターン限定** → 使うターンをよく考える
- **マリガン**で不要なカードを入れ替え、戦略を立て直せる
- どちらもマナを消費するので、使いすぎに注意

---

## 🎨 カードエフェクト

全**25種類**のカードにそれぞれ専用の超派手エフェクトが実装されています！

- **Fire属性**: 炎の爆発、火球、溶岩など
- **Water属性**: 水滴、波、氷、水蛇など
- **Nature属性**: 葉っぱ、蔦、巨木、茨の嵐など
- **Earth属性**: 地割れ、隕石、地震、岩石など
- **Air属性**: 風刃、竜巻、暴風、雷嵐など

攻撃力7以上の**最高レアカード**は画面全体に影響を及ぼす特別エフェクト付き！

---

## 🏆 勝敗判定

### ゲーム終了条件
- どちらかの**手札が0枚**になったらゲーム終了
- **スコアが高い方が勝利**

### 最終結果画面
- 超派手な演出で勝敗を表示
- **勝利**: 金色の「大勝利！」＋300個の祝パーティクル
- **引き分け**: 黄色の「引き分け」
- **敗北**: 赤色の「敗北」
- **再戦ボタン**でいつでもリトライ可能

---

## 📊 データログ

### 自動ログ記録
プレイヤーの行動を自動的にCSV形式で記録：
- ターン番号
- 選択したカード
- 反応時間（ミリ秒）
- 勝敗結果
- 残り手札枚数

### ログ保存先
`{Application.persistentDataPath}/TCG_Logs/`

---

## 🎭 特殊演出

### 不戦敗演出
コスト不足で出せるカードがない場合：
- 赤い警告フラッシュ
- 「不戦敗」の巨大テキスト（激しく点滅）
- 200個のバツ印（×）が飛び散る
- 50個の「失格」文字が回転
- AIに1ポイント＋手札1枚ペナルティ

### バトル演出
- カード出現アニメーション（画面端から登場）
- 属性別エフェクト（25種類）
- 画面中央に勝敗結果を大きく表示
- 属性有利で勝った場合は「（属性有利）」表示
- 勝利=緑、敗北=赤、引き分け=黄色

---

## 🛠️ 技術スタック

- **Unity 2022.3+**
- **Legacy UI (uGUI)**
- カードデータ: `Resources/card_data.json`
- ログ出力: `DataLogger.cs` (CSV形式)
- 全エフェクト: コルーチンベースのアニメーションシステム

---

## 📝 カードデータ構造

```json
{
  "cards": [
    {
      "id": "F1",
      "name": "Fire Wolf",
      "attack": 5,
      "cost": 3,
      "type": "Fire",
      "sprite": "Sprites/fire"
    }
  ]
}
```

- **id**: カード固有ID
- **name**: カード名
- **attack**: 攻撃力（マナ獲得時の量でもある）
- **cost**: 使用に必要なマナ
- **type**: 属性（Fire/Water/Nature/Earth/Air）
- **sprite**: カード画像パス（Resources相対パス）

---

## 🎓 研究用途

このゲームはリサーチ用に設計されており、以下のデータを収集します：

- **意思決定速度**: カード選択にかかる時間
- **リソース管理**: マナの使用パターン
- **リスク評価**: ブースト/マリガンの選択傾向
- **学習曲線**: プレイ回数による戦略の変化

全てのプレイデータはCSVで出力され、分析可能です。

---

## 📜 ライセンス

研究用プロジェクト
© 2025 ResearchTCG Project

---

**楽しんでプレイしてください！** 🎮✨
